# Installer Branding

## Overview

DisplayOS customizes the Debian Installer's appearance through three mechanisms:

1. **Custom header image** — replaces the Debian logo.
2. **GTK2 theme** — controls graphical installer colors.
3. **Newt palette** — controls text-mode installer colors.

All branding is generated by `scripts/06-installer-branding.sh`.

## Installer Header

Place your custom header image at `assets/installer-header.png`. During the build, it is copied to `config/includes.installer/usr/share/graphics/logo_debian.png`, replacing the default Debian logo in the installer UI.

**Specifications:**

- Format: PNG (transparency supported)
- Recommended size: match the original Debian installer header dimensions

If the file is missing, the installer falls back to the default Debian header.

## Color Configuration

Edit `config.env` to set installer colors:

```bash
INSTALLER_PRIMARY_COLOR="#0197F6"      # Primary brand color
INSTALLER_SECONDARY_COLOR="#66C0F9"    # Secondary/accent color
INSTALLER_TEXT_COLOR="#99D5FB"          # Text on colored backgrounds
INSTALLER_BG_COLOR="#001E31"           # Dialog background
```

All values must be in `#RRGGBB` hex format (6-digit, no shorthand).

### How Colors Are Used

**Graphical installer (GTK2):**

| UI Element | Color Variable |
|------------|---------------|
| Button hover / highlight | `INSTALLER_PRIMARY_COLOR` |
| Banner background | `INSTALLER_PRIMARY_COLOR` |
| Progress bar fill | `INSTALLER_PRIMARY_COLOR` |
| Selected items | `INSTALLER_PRIMARY_COLOR` |
| Active / pressed buttons | `INSTALLER_SECONDARY_COLOR` |
| Text on colored backgrounds | `INSTALLER_TEXT_COLOR` |
| Dialog background | `INSTALLER_BG_COLOR` |
| Button background | `INSTALLER_BG_COLOR` |

Colors are converted from hex to GTK2's 0-65535 integer RGB range using this formula:

```
GTK_value = hex_component * 257
```

For example, `#0197F6` becomes `R=257, G=38759, B=63222`.

**Text-mode installer (Newt):**

The text-mode palette uses fixed terminal color names (not hex). The current palette uses a blue-and-white scheme:

| Element | Foreground | Background |
|---------|-----------|------------|
| Root / border / window | white | blue |
| Title | yellow | blue |
| Buttons | black | cyan |
| Active buttons | white | blue |
| Entry fields | black | lightgray |
| List items | black | lightgray |
| Active list items | black | cyan |
| Progress bar (empty) | white | blue |
| Progress bar (full) | white | cyan |

> NOTE: The text-mode palette is currently hardcoded in `scripts/06-installer-branding.sh` and does not use the `INSTALLER_*_COLOR` variables. To customize text-mode colors, edit the palette directly in the script.

## Example Color Schemes

**Default (Dark Blue):**

```bash
INSTALLER_PRIMARY_COLOR="#0197F6"
INSTALLER_SECONDARY_COLOR="#66C0F9"
INSTALLER_TEXT_COLOR="#99D5FB"
INSTALLER_BG_COLOR="#001E31"
```

**Corporate Red:**

```bash
INSTALLER_PRIMARY_COLOR="#DC0000"
INSTALLER_SECONDARY_COLOR="#FF4444"
INSTALLER_TEXT_COLOR="#FFFFFF"
INSTALLER_BG_COLOR="#1A0000"
```

**Corporate Green:**

```bash
INSTALLER_PRIMARY_COLOR="#10B981"
INSTALLER_SECONDARY_COLOR="#34D399"
INSTALLER_TEXT_COLOR="#FFFFFF"
INSTALLER_BG_COLOR="#001A10"
```

**Light Theme:**

```bash
INSTALLER_PRIMARY_COLOR="#3B82F6"
INSTALLER_SECONDARY_COLOR="#60A5FA"
INSTALLER_TEXT_COLOR="#FFFFFF"
INSTALLER_BG_COLOR="#F5F5F5"
```

## Testing

### Graphical Installer

Boot the ISO and select "Graphical install" from the boot menu. Verify:

- Logo appears in the header area.
- Banner background uses `INSTALLER_PRIMARY_COLOR`.
- Buttons change color on hover.
- Progress bars use brand colors.
- Dialog backgrounds use `INSTALLER_BG_COLOR`.

### Text-Mode Installer

Boot the ISO and select "Install" (text mode). Verify:

- Dialog boxes use the configured color scheme.
- Text is readable against the background.
- Buttons and selections are clearly visible.

## Generated Files

The branding step creates these files in `config/includes.installer/`:

| Path | Purpose |
|------|---------|
| `usr/share/graphics/logo_debian.png` | Installer header image |
| `usr/share/themes/Clearlooks/gtk-2.0/gtkrc` | GTK2 theme for graphical installer |
| `usr/lib/newt/palette` | Color palette for text-mode installer |

## Related Docs

- [Configuration](Configuration.md) — color variable reference
- [Customization](Customization.md) — general customization guide
- [Build Process](BuildProcess.md) — where branding fits in the pipeline
