# Directory Structure

## Repository Layout

```
DisplayOS/
├── build.sh                        # Build orchestrator — entrypoint
├── config.env                      # Configuration file (edit this)
├── LICENSE                         # GPLv3 license
├── README.md                       # Project overview and quick start
├── assets/                         # Static assets for branding
│   ├── logo.png                    # Project logo (used in README)
│   ├── wallpaper.png               # Desktop, GRUB, and LightDM background
│   ├── splash.png                  # Boot splash for ISOLINUX and GRUB
│   └── installer-header.png        # Replaces Debian logo in installer UI
├── scripts/                        # Numbered build stages
│   ├── 00-init.sh                  # Logging and debug setup
│   ├── 01-preflight.sh             # Check for leftover artifacts, verify assets
│   ├── 02-prerequisites.sh         # Install build dependencies (apt)
│   ├── 03-password.sh              # Generate/hash root password
│   ├── 04-dump-config.sh           # Write effective config to output/
│   ├── 05-config-tree.sh           # Create live-build config/ tree
│   ├── 06-installer-branding.sh    # Generate installer GTK theme and newt palette
│   ├── 07-hooks.sh                 # Generate chroot hooks
│   ├── 08-preseed.sh               # Generate preseed file
│   ├── 09-livebuild.sh             # Run lb clean, lb config, lb build
│   └── 10-finalize.sh              # Collect ISO artifact, print summary
├── docs/                           # Documentation
│   ├── Overview.md
│   ├── BuildProcess.md
│   ├── Configuration.md
│   ├── HostRequirements.md
│   ├── DirectoryStructure.md
│   ├── Customization.md
│   ├── InstallerBranding.md
│   ├── SystemBehavior.md
│   ├── Troubleshooting.md
│   └── Development.md
├── config/                         # Generated at build time (do not edit manually)
└── output/                         # Build artifacts
```

## Generated Directories

These directories are created during the build and should not be committed to version control:

### `config/` (generated by `scripts/05-config-tree.sh` and later steps)

```
config/
├── package-lists/
│   └── displayos.list.chroot         # One package name per line
├── hooks/normal/
│   ├── 010-root-ssh.chroot           # Root password, SSH, NetworkManager, keyboard
│   ├── 020-kiosk.chroot              # Kiosk launcher script and autostart
│   ├── 030-autologin.chroot          # Root autologin on tty1
│   ├── 040-hardening.chroot          # Sysctl kernel hardening
│   ├── 050-fix-apt.chroot            # APT sources.list configuration
│   ├── 060-hostname.chroot           # Hostname and /etc/hosts
│   ├── 061-xfce-shortcut.chroot      # Ctrl+Alt+W shortcut for nmtui
│   ├── 062-grub-customization.chroot # GRUB branding and settings
│   └── 065-system-wallpaper.chroot   # System-wide wallpaper for XFCE/GNOME/LightDM
├── includes.chroot/                   # Files installed into the target system
│   ├── usr/local/share/displayos/wallpaper.png
│   ├── usr/local/bin/displayos-ensure-shortcuts
│   ├── etc/apt/sources.list
│   ├── etc/xdg/autostart/displayos-shortcuts.desktop
│   └── root/.config/xfce4/xfconf/xfce-perchannel-xml/xfwm4.xml
├── includes.binary/                   # Files placed on the ISO medium
│   ├── isolinux/splash.png
│   ├── boot/grub/splash.png
│   └── preseed/
│       ├── displayos.cfg              # Preseed configuration
│       └── sources.list               # APT sources template
└── includes.installer/                # Files injected into the installer initrd
    ├── usr/share/graphics/logo_debian.png
    ├── usr/share/themes/Clearlooks/gtk-2.0/gtkrc
    └── usr/lib/newt/palette
```

### `output/` (generated by the build)

```
output/
├── DisplayOS-bookworm-amd64-unattended.iso   # Final bootable ISO
├── build.log                                  # Full build output
└── configuration.txt                          # Config snapshot with password
```

### Temporary build directories

These are created and managed by `live-build` itself:

| Directory | Purpose |
|-----------|---------|
| `chroot/` | The debootstrapped Debian filesystem |
| `binary/` | Staging area for ISO contents |
| `cache/` | APT package cache (speeds up rebuilds) |
| `auto/` | live-build auto-scripts directory |

All of these can be safely removed with:

```bash
sudo lb clean --purge
rm -rf cache/ chroot/ binary/ auto/ config/
```

## Related Docs

- [Build Process](BuildProcess.md) — how the config tree is populated
- [Development](Development.md) — adding new hooks and includes
- [Configuration](Configuration.md) — variables that drive the build
